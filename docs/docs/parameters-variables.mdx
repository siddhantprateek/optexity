---
title: Parameters & Variables
description: Working with dynamic data in automations
---

Parameters and variables are the backbone of data flow in Optexity automations. They allow you to pass data in, extract data out, and use dynamic values throughout your workflow.

## Parameter Types

Optexity has two categories of parameters:

| Type | Purpose | When Set |
|------|---------|----------|
| **Input Parameters** | Data provided before execution | Before automation runs |
| **Generated Parameters** | Data extracted during execution | During automation via extraction actions |

## Defining Parameters

Parameters are defined in the `Parameters` object of your automation:

```python
from optexity.schema.automation import Automation, Parameters

automation = Automation(
    url="https://example.com",
    parameters=Parameters(
        input_parameters={
            "username": ["john@example.com"],
            "password": ["secret123"],
            "order_ids": ["ORD-001", "ORD-002", "ORD-003"],
        },
        generated_parameters={
            "confirmation_number": [],
            "extracted_items": [],
        },
    ),
    nodes=[...],
)
```

### Value Format

All parameter values are stored as **lists of strings**:

```python
input_parameters={
    "single_value": ["one"],           # Single value
    "multiple_values": ["a", "b", "c"], # Multiple values for loops
    "numeric_as_string": ["42", "100"], # Numbers as strings
    "dates": ["2024-01-15"],            # Dates as strings
}
```

<Warning>
Always use lists, even for single values. `"value"` is invalid; use `["value"]` instead.
</Warning>

## Variable Substitution Syntax

Reference parameter values using the `{variable_name[index]}` syntax:

```python
# Basic usage
input_text="{username[0]}"      # First value of username
input_text="{password[0]}"      # First value of password

# With multiple values
input_text="{order_ids[0]}"     # "ORD-001"
input_text="{order_ids[1]}"     # "ORD-002"
input_text="{order_ids[2]}"     # "ORD-003"
```

### Where Substitution Works

Variable substitution works in these fields:

| Field | Example |
|-------|---------|
| `input_text` | `input_text="{email[0]}"` |
| `prompt_instructions` | `prompt_instructions="Click order {order_id[0]}"` |
| `command` | `command="""get_by_text("{item_name[0]}")"""` |
| `xpath` | `xpath="//td[text()='{order_id[0]}']"` |
| `select_values` | `select_values=["{country[0]}"]` |
| `task` (agentic) | `task="Search for {query[0]}"` |

### Loop Index Variable

In `ForLoopNode`, use `{variable_name[index]}` to reference the current iteration's value:

```python
ForLoopNode(
    variable_name="product_ids",  # Iterates over this variable
    nodes=[
        ActionNode(
            interaction_action=InteractionAction(
                click_element=ClickElementAction(
                    # {product_ids[index]} resolves to current item
                    command="""get_by_text("{product_ids[index]}")""",
                    prompt_instructions="Click on product {product_ids[index]}",
                )
            )
        ),
    ],
)
```

If `product_ids` contains `["PROD-1", "PROD-2", "PROD-3"]`:
- First iteration: `{product_ids[index]}` → `"PROD-1"`
- Second iteration: `{product_ids[index]}` → `"PROD-2"`
- Third iteration: `{product_ids[index]}` → `"PROD-3"`

## Input Parameters

Input parameters are values you provide before the automation runs. They're typically:

- Credentials (usernames, passwords)
- Search queries
- Filter values
- Configuration options

### Example: Login with Credentials

```python
parameters=Parameters(
    input_parameters={
        "username": ["admin@company.com"],
        "password": ["secretpassword"],
    },
    generated_parameters={},
),
nodes=[
    ActionNode(
        interaction_action=InteractionAction(
            input_text=InputTextAction(
                command="""get_by_label("Email")""",
                input_text="{username[0]}",
                prompt_instructions="Enter the email address",
            )
        )
    ),
    ActionNode(
        interaction_action=InteractionAction(
            input_text=InputTextAction(
                command="""get_by_label("Password")""",
                input_text="{password[0]}",
                prompt_instructions="Enter the password",
            )
        )
    ),
]
```

### Example: Multiple Search Queries

```python
parameters=Parameters(
    input_parameters={
        "search_terms": ["laptop", "monitor", "keyboard"],
    },
    generated_parameters={},
),
nodes=[
    ForLoopNode(
        variable_name="search_terms",
        nodes=[
            ActionNode(
                interaction_action=InteractionAction(
                    input_text=InputTextAction(
                        command="""get_by_role("searchbox")""",
                        input_text="{search_terms[index]}",
                        prompt_instructions="Enter search term",
                    )
                )
            ),
            # ... process search results
        ],
    ),
]
```

## Generated Parameters

Generated parameters are populated during automation execution, typically by extraction actions.

### Defining Output Variables

Use `output_variable_names` in `LLMExtraction` to specify which extracted fields should be stored:

```python
ActionNode(
    extraction_action=ExtractionAction(
        llm=LLMExtraction(
            source=["axtree"],
            extraction_format={
                "order_ids": "List[str]",
                "total_count": "str",
            },
            extraction_instructions="Extract all order IDs from the table",
            output_variable_names=["order_ids"],  # Store this in generated_parameters
        )
    )
)
```

After this action executes, `order_ids` will be available in `generated_parameters` and can be used in subsequent actions.

### Using Extracted Values

```python
# Define empty generated parameter
parameters=Parameters(
    input_parameters={},
    generated_parameters={
        "order_ids": [],  # Will be populated by extraction
    },
),

# Later, extract values
ActionNode(
    extraction_action=ExtractionAction(
        llm=LLMExtraction(
            extraction_format={"order_ids": "List[str]"},
            output_variable_names=["order_ids"],
            ...
        )
    )
),

# Then use extracted values in a loop
ForLoopNode(
    variable_name="order_ids",
    nodes=[
        ActionNode(
            interaction_action=InteractionAction(
                click_element=ClickElementAction(
                    prompt_instructions="Click on order {order_ids[index]}",
                    ...
                )
            )
        ),
    ],
),
```

## Data Flow Example

Here's a complete example showing how data flows through an automation:

```python
from optexity.schema.automation import (
    Automation, ActionNode, ForLoopNode, Parameters
)
from optexity.schema.actions.interaction_action import (
    InteractionAction, ClickElementAction, InputTextAction
)
from optexity.schema.actions.extraction_action import (
    ExtractionAction, LLMExtraction
)

order_processing = Automation(
    url="https://orders.example.com",
    parameters=Parameters(
        # Step 1: Define inputs
        input_parameters={
            "username": ["admin@example.com"],
            "password": ["secret123"],
            "date_range": ["last-30-days"],
        },
        # Step 2: Define placeholders for extracted data
        generated_parameters={
            "order_numbers": [],
        },
    ),
    nodes=[
        # Step 3: Login using input parameters
        ActionNode(
            interaction_action=InteractionAction(
                input_text=InputTextAction(
                    input_text="{username[0]}",
                    prompt_instructions="Enter username",
                    command="""get_by_label("Email")""",
                )
            )
        ),
        ActionNode(
            interaction_action=InteractionAction(
                input_text=InputTextAction(
                    input_text="{password[0]}",
                    prompt_instructions="Enter password",
                    command="""get_by_label("Password")""",
                )
            )
        ),
        
        # Step 4: Filter by date range
        ActionNode(
            interaction_action=InteractionAction(
                click_element=ClickElementAction(
                    command="""get_by_text("{date_range[0]}")""",
                    prompt_instructions="Select the date range filter",
                )
            )
        ),
        
        # Step 5: Extract order numbers into generated_parameters
        ActionNode(
            extraction_action=ExtractionAction(
                llm=LLMExtraction(
                    source=["axtree"],
                    extraction_format={"order_numbers": "List[str]"},
                    extraction_instructions="Extract all order numbers from the table",
                    output_variable_names=["order_numbers"],
                )
            )
        ),
        
        # Step 6: Loop through extracted order numbers
        ForLoopNode(
            variable_name="order_numbers",
            nodes=[
                ActionNode(
                    interaction_action=InteractionAction(
                        click_element=ClickElementAction(
                            command="""get_by_text("{order_numbers[index]}")""",
                            prompt_instructions="Click on order {order_numbers[index]}",
                        )
                    )
                ),
                # Process each order...
            ],
        ),
    ],
)
```

## Best Practices

### Naming Conventions

Use descriptive, consistent names:

```python
# Good
input_parameters={
    "search_query": [...],
    "date_of_birth": [...],
    "member_ids": [...],
}

# Avoid
input_parameters={
    "q": [...],
    "dob": [...],
    "ids": [...],
}
```

### Placeholder Values for Development

When defining automations, use placeholder values that are easy to replace:

```python
input_parameters={
    "username": ["test@test.com"],  # Replace via API
    "password": ["password"],
    "account_id": ["ACC-XXXXX"],
}
```

### Type Hints in Extraction

Use Python type hints in extraction formats:

```python
extraction_format={
    "single_value": "str",           # Single string
    "multiple_values": "List[str]",  # List of strings
}
```

<Note>
Only `str` and `List[str]` are supported for `output_variable_names`. Other types can be extracted but won't be stored as variables.
</Note>

## Next Steps

- Learn about [Extraction Actions](/docs/extraction-actions) to populate generated parameters
- See [Control Flow](/docs/control-flow) for using variables in loops
- Check [Best Practices](/docs/best-practices) for more tips

