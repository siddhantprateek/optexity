---
title: 1Password Integration
description: Store and retrieve secrets securely using 1Password
---

Use 1Password to store sensitive data like passwords and API keys. Values are retrieved at runtime without exposing secrets in your automation definition.

## Setup

### Get Service Account Token

1. Go to [my.1password.com](https://my.1password.com/home)
2. Create a service account
3. Copy the token

<iframe
    width="100%"
    height="400"
    src="https://www.youtube.com/embed/5LHseHgkPs4"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
/>

### Configure Environment

Add to your `.env` file:

```bash
OP_SERVICE_ACCOUNT_TOKEN=your_service_account_token
```

---

## Usage

Move parameters from `input_parameters` to `secure_parameters`:

**Before:**
```json
{
  "input_parameters": {
    "password": ["password_value"]
  }
}
```

**After:**
```json
{
  "secure_parameters": {
    "password": [{
      "onepassword": {
        "type": "raw",
        "vault_name": "my_vault",
        "item_name": "my_login",
        "field_name": "password"
      }
    }]
  }
}
```

---

## Properties

| Property | Description |
|----------|-------------|
| `type` | `"raw"` for direct values, `"totp_secret"` for TOTP codes |
| `vault_name` | 1Password vault name |
| `item_name` | Item name in vault |
| `field_name` | Field to retrieve |
| `digits` | Required for `totp_secret` (e.g., `6`) |

---

## TOTP from 1Password

Retrieve TOTP secret and generate codes:

```json
{
  "secure_parameters": {
    "auth_code": [{
      "onepassword": {
        "type": "totp_secret",
        "vault_name": "vault",
        "item_name": "login",
        "field_name": "totp_secret",
        "digits": 6
      }
    }]
  }
}
```

<Tip>
See [TOTP Integration](/docs/advanced/totp-integration) for more 2FA options.
</Tip>

---

## Revoking Access

Revoke the service account token anytime from the 1Password dashboard.
